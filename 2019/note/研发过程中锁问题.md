
### 一.使用全局锁

使用全局锁是高并发下性能杀手，大量 goroutine 堵塞在写锁，会导致接口延迟、甚至超时。


### 二 .分布式锁
一般用在分布式系统或者多个应用中，保证同一时间只有一个应用在执行任务。
使用场景：有个后台定时任务每天夜里跑，但是你的应用部署了多个实例，这个时候就需要了分布式锁
通常使用Redis,基于Redis单线程模式,采用队列模式,将并发访问转换成串行。
有个缺点：
* 1.非原子性操作，解决方案使用时节后lua
* 2.设置合理的超时时间，不然还没有执行完，则超时了，锁被释放，这下就尴尬了

